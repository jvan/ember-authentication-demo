<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>ember//authentication</title>
      <link rel="stylesheet" href="/css/bootstrap/bootstrap.css">
      <link rel="stylesheet" href="/css/style.css">
   </head> 
   <body>

      <script type="text/x-handlebars">
         {{! Application template. }}
         <div id="main" class="container">
            <div class="row-fluid">
               <div class="col-md-8 col-md-offset-2">

                  {{! Top-level navigation. }}
                  <ul class="nav nav-tabs">
                     {{! Bootstrap requires the active class attribute to be associated with the <li> element. }}
                     {{#link-to "index" tagName="li"}}
                        <a {{bind-attr href="view.href"}}><i class="glyphicon glyphicon-home"></i> home</a>
                     {{/link-to}}

                     {{#link-to "articles" tagName="li"}}
                        <a {{bind-attr href="view.href"}}>articles</a>
                     {{/link-to}}

                     {{! Display a logout link if the user is currently logged in. }}
                     {{#if controllers.login.isLoggedIn}}
                        <li class="pull-right">
                           <a href="#" {{action "logout" target="controllers.login"}}>logout<i class="glyphicon glyphicon-log-out"></i></a>
                        </li>
                     {{else}}
                        {{#link-to "login" tagName="li" class="pull-right"}}
                           <a {{bind-attr href="view.href"}}>login</a>
                        {{/link-to}}
                     {{/if}}

                  </ul>

               {{outlet}}
               </div>

            </div>
         </div>
      </script>

      <script type="text/x-handlebars" data-template-name="index">
         <h2>ember <small>basic authentication demo</small></h2>
      </script>

      <script type="text/x-handlebars" data-template-name="articles">
         <h2>articles</h2>
         
         {{#each model}}
            <article>
               <h3>{{title}}</h3>
               <p>posted by <em>{{author}}</em></p>
               <p>{{body}}</p>
            </article>
         {{/each}}
      </script>

      <script type="text/x-handlebars" data-template-name="login">
         <div class="row">
            <div id="login-form" class="col-md-6 col-md-offset-3">

               <form class="form-horizontal" {{action login on="submit"}}>
                  {{#if isLoggedIn}}
                     <div class="form-group alert alert-success">
                        You are already logged in.
                     </div>
                  {{else}}
                     <div class="form-group">
                        <h2>login</h2>
                     </div>
                     <div class="form-group">
                        {{input value=username type="text" class="form-control" placeholder="username"}}
                     </div>
                     <div class="form-group">
                        {{input value=password type="password" class="form-control" placeholder="password"}}
                     </div>
                     <div class="form-group">
                        <!--{{input class="btn btn-primary" type="submit" value="login"}} -->
                        <button class="btn btn-primary" type="submit">
                           login <span class="glyphicon glyphicon-log-in"></span>
                        </button>
                     </div>

                     {{#if errorMessage}}
                        <div class="form-group">
                           <div class="alert alert-danger">{{errorMessage}}</div>
                        </div>
                     {{/if}}
                  {{/if}}
               </form>

            </div>
         </div>
      </script>

      <script src="/js/libs/jquery.js"></script>
      <script src="/js/libs/handlebars.js"></script>
      <script src="/js/libs/ember.js"></script>
      <script src="/js/libs/ember-data.js"></script>

      <script src="/js/app.js"></script>
      <!--<script src="/js/router.js"></script>-->
      <!--<script src="/js/templates.js"></script>-->
   </body>
</html>
